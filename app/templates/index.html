{% extends "base.html" %}

{% block title %}Vikram Penumarti{% endblock %}
{% block page_title %}Personal Portfolio{% endblock %}
{% block page_description %}My Personal Portfolio{% endblock %}

{% block content %}
<div class="profile">
    <div id="profile-picture" class="profile-picture">
        <img src="{{ url_for('static', filename='img/Headshot.jpg') }}" alt="Vikram Penumarti">
        <button id="music-button" class="music-button" title="Play one of my favorite songs">
            <span class="music-icon">üéµ</span>
        </button>
        <audio id="background-music" preload="none">
            <source src="{{ url_for('static', filename='audio/best_time_clean.mp3') }}" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    </div>
    <h1>Vikram Penumarti</h1>
</div>

<!-- About Section -->
<section class="about-section">
    <div class="about-header">
        <h2 class="about-title">About Me</h2>
        <p class="about-subtitle">Student ‚Ä¢ Developer ‚Ä¢ Innovator</p>
    </div>
    <div class="about-content">
        <p class="about-text">
            Hi, I'm <span class="highlight">Vikram</span>, an incomming fourth year <span class="highlight">computer science major</span> at <span class="school-highlight">UC Davis</span>. I'm passionate about technology and building solutions that make a difference.
        </p>
        
        <div class="about-stats">
            <div class="stat-card">
                <span class="stat-number">4th</span>
                <span class="stat-label">Year Student</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">CS</span>
                <span class="stat-label">Major</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">UC</span>
                <span class="stat-label">Davis</span>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Smooth scrolling for profile picture
    document.addEventListener('DOMContentLoaded', () => {
        const profilePicture = document.getElementById('profile-picture');
        profilePicture.style.opacity = '0';
        profilePicture.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
            profilePicture.style.transition = 'all 0.6s ease';
            profilePicture.style.opacity = '1';
            profilePicture.style.transform = 'translateY(0)';
        }, 100);
    });

    // Music player functionality
    document.addEventListener('DOMContentLoaded', () => {
        const musicButton = document.getElementById('music-button');
        const backgroundMusic = document.getElementById('background-music');
        let isPlaying = false;

        // Make sure elements exist
        if (!musicButton || !backgroundMusic) {
            console.error('Music elements not found');
            return;
        }

        musicButton.addEventListener('click', (e) => {
            e.preventDefault(); // Prevent any default button behavior
            console.log('Music button clicked, isPlaying:', isPlaying);
            
            if (isPlaying) {
                backgroundMusic.pause();
                musicButton.innerHTML = '<span class="music-icon">üéµ</span>';
                musicButton.classList.remove('playing');
                isPlaying = false;
                console.log('Music paused');
            } else {
                console.log('Attempting to play music...');
                console.log('Audio src:', backgroundMusic.src);
                
                // Load the audio first if not loaded
                if (backgroundMusic.readyState === 0) {
                    backgroundMusic.load();
                }
                
                const playPromise = backgroundMusic.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log('Music started playing successfully');
                        musicButton.innerHTML = '<span class="music-icon">‚è∏</span>';
                        musicButton.classList.add('playing');
                        isPlaying = true;
                    }).catch((error) => {
                        console.error('Audio play failed:', error);
                        alert('Could not play audio. Error: ' + error.message);
                    });
                }
            }
        });

        // Reset button when song ends
        backgroundMusic.addEventListener('ended', () => {
            console.log('Song ended');
            musicButton.innerHTML = '<span class="music-icon">üéµ</span>';
            musicButton.classList.remove('playing');
            isPlaying = false;
        });

        // Set volume
        backgroundMusic.volume = 0.3;

        // Debug audio loading
        backgroundMusic.addEventListener('loadstart', () => console.log('Audio loading started'));
        backgroundMusic.addEventListener('canplay', () => console.log('Audio can start playing'));
        backgroundMusic.addEventListener('error', (e) => console.error('Audio error:', e));
    });
</script>
{% endblock %}